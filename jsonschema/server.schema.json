{
 "$schema": "https://json-schema.org/draft/2020-12/schema",
 "$id": "https://github.com/relychan/gohttps/server-config",
 "$ref": "#/$defs/ServerConfig",
 "$defs": {
  "CORSConfig": {
   "properties": {
    "allowedOrigins": {
     "items": {
      "type": "string"
     },
     "type": "array",
     "description": "AllowedOrigins is a list of origins a cross-domain request can be executed from.\nIf the special \"*\" value is present in the list, all origins will be allowed.\nAn origin may contain a wildcard (*) to replace 0 or more characters\n(i.e.: http://*.domain.com). Usage of wildcards implies a small performance penalty.\nOnly one wildcard can be used per origin.\nCORS is disabled if empty."
    },
    "allowedMethods": {
     "items": {
      "type": "string"
     },
     "type": "array",
     "description": "AllowedMethods is a list of methods the client is allowed to use with cross-domain requests.\nDefault value is simple methods (HEAD, GET and POST)."
    },
    "allowedHeaders": {
     "items": {
      "type": "string"
     },
     "type": "array",
     "description": "AllowedHeaders is list of non simple headers the client is allowed to use with cross-domain requests.\nIf the special \"*\" value is present in the list, all headers will be allowed.\nDefault value is [] but \"Origin\" is always appended to the list."
    },
    "exposedHeaders": {
     "items": {
      "type": "string"
     },
     "type": "array",
     "description": "ExposedHeaders indicates which headers are safe to expose to the API of a CORS API specification"
    },
    "allowCredentials": {
     "type": "boolean",
     "description": "AllowCredentials indicates whether the request can include user credentials like cookies,\nHTTP authentication or client side SSL certificates."
    },
    "maxAge": {
     "type": "integer",
     "minimum": 0,
     "description": "MaxAge indicates how long (in seconds) the results of a preflight request can be cached"
    },
    "optionsPassthrough": {
     "type": "boolean",
     "description": "OptionsPassthrough instructs preflight to let other potential next handlers to process the OPTIONS method.\nTurn this on if your application handles OPTIONS."
    }
   },
   "additionalProperties": false,
   "type": "object",
   "description": "CORSConfig represents configurations of CORS."
  },
  "Duration": {
   "type": "string",
   "pattern": "^((([0-9]+h)?([0-9]+m)?([0-9]+s))|(([0-9]+h)?([0-9]+m))|([0-9]+h))$",
   "description": "Duration string"
  },
  "ServerConfig": {
   "properties": {
    "port": {
     "type": "integer",
     "description": "The port where the server is listening to."
    },
    "logLevel": {
     "type": "string",
     "enum": [
      "INFO",
      "DEBUG",
      "WARN",
      "ERROR"
     ],
     "description": "Level of the logger."
    },
    "compressionLevel": {
     "type": "integer",
     "maximum": 9,
     "minimum": -1,
     "description": "Default level which the server uses to compress response bodies."
    },
    "requestTimeout": {
     "$ref": "#/$defs/Duration",
     "description": "The default timeout of every request. Return a 504 Gateway Timeout error to the client."
    },
    "readTimeout": {
     "$ref": "#/$defs/Duration",
     "description": "The maximum duration for reading the entire request, including the body.\nA zero or negative value means there will be no timeout."
    },
    "readHeaderTimeout": {
     "$ref": "#/$defs/Duration",
     "description": "The amount of time allowed to read request headers.\nThe connection's read deadline is reset after reading the headers and the Handler can decide what is considered too slow for the body.\nIf zero, the value of ReadTimeout is used. If negative, or if zero and ReadTimeout is zero or negative, there is no timeout."
    },
    "writeTimeout": {
     "$ref": "#/$defs/Duration",
     "description": "The maximum duration before timing out writes of the response. It is reset whenever a new request's header is read.\nLike ReadTimeout, it does not let Handlers make decisions on a per-request basis.\nA zero or negative value means there will be no timeout."
    },
    "idleTimeout": {
     "$ref": "#/$defs/Duration",
     "description": "The maximum amount of time to wait for the next request when keep-alives are enabled.\nIf zero, the value of ReadTimeout is used.\nIf negative, or if zero and ReadTimeout is zero or negative, there is no timeout."
    },
    "maxHeaderKilobytes": {
     "type": "integer",
     "description": "The maximum number of bytes the server will read parsing the request header's keys and values, including the request line.\nIt does not limit the size of the request body. If zero, DefaultMaxHeaderBytes is used."
    },
    "maxBodyKilobytes": {
     "type": "integer",
     "description": "The maximum number of bytes the server will read parsing the request body.\nA zero or negative value means there will be no limit."
    },
    "tlsCertFile": {
     "type": "string",
     "description": "The TLS certificate file to enable TLS connections."
    },
    "tlsKeyFile": {
     "type": "string",
     "description": "The TLS key file to enable TLS connections."
    },
    "cors": {
     "$ref": "#/$defs/CORSConfig",
     "description": "The configuration container to setup the CORS middleware."
    }
   },
   "additionalProperties": false,
   "type": "object",
   "description": "ServerConfig holds information of required environment variables."
  }
 }
}
